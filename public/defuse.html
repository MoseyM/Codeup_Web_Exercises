<html>
<head>
    <title>Disarm the BOM (Browser Object Model)</title>
</head>
<style type="text/css">
    .timer {
        font-size: 60px;
        color: red;

        position: fixed;
        right: 10px;
        top: 0px;
    }
</style>
<body>
    <h1>Mission Impossible!</h1>
    <div id="timer" class="timer"></div>
    <button id="btnDefuse">Defuse the BOM!</button>
    <script>

    // Initialize some variables.  You don't have to change these.
    var count = 0;
    var maxCount = 10;
    var detonationTimer = 10; // seconds
    var btnDefuse = document.getElementById('btnDefuse');


    //  TODO: Create a variable to represent your setInterval timer, 
    // which will have a one second interval.
    var intervalId = setInterval(function () {

        // TODO: Decrement the timer by one each interval.
        this.detonationTimer--;
        // TODO: Update the timer div with the new value
        var newTimer = document.getElementById('timer');
        // console.log(newTimer);
        newTimer.innerHTML=this.detonationTimer;

        // document.getElementById('timer').innerHTML = test;

        // TODO: Console log the current interval.

        // TODO: Explode the BOM with an alert if the timer runs out.
        if(newTimer.innerHTML==0){
            alert("The bomb has Exploded");
            clearInterval(intervalId);
            btnDefuse.removeEventListener('click', clickFunction);
            // replay();
        }
        // TODO: Clear the interval afterwards.
    }, 1000);

    // function replay() {
    //     var replay = confirm('Would you like to play again?');
    //     if (replay) {
    //     this.detonationTimer=10;
    //     this.intervalId.setInterval;
    //      };
    // }


    // TODO: Create a variable whose value is the btnDefuse element.
    // TODO: Attach an event listener to that variable, which runs when clicked.
    function clickFunction() {
        // TODO: Generate the random value for the margin-top css property
        var randMarginTop = (Math.floor(Math.random()*100));
        // TODO: Generate the random value for the margin-left css 
        
        var randMarginLeft = (Math.floor(Math.random()*100));
        // TODO: If the count is equal or greater than maxCount
        if (count >= maxCount) {
            // TODO: Clear the interval.
            clearInterval(intervalId);
            // TODO: Alert "You are a hero! You disarmed the BOM!"
            alert('You are a hero! You disarmed the BOM!');
            replay();
        }

        // TODO: Else if the count is less than maxCount
        else {
            // TODO: Assign the random margin top to the button
            document.getElementById('btnDefuse').style.marginTop = randMarginTop;
            // TODO: Assign the random margin left to the button
            document.getElementById('btnDefuse').style.marginLeft = randMarginLeft;
            // TODO: Increment the count by one
            count++;
        }
    };

    btnDefuse.addEventListener('click', clickFunction);


    </script>
</body>
</html>